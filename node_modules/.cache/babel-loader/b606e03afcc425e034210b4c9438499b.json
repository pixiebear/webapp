{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.remoteSignWindowEventEmitterImplementation = exports.RemoteSignWindowEventEmitter = exports.CivicSignEventTypeRequest = exports.CivicSignEventTypeResponse = exports.eventEmitter = void 0;\n\nconst logger_1 = __importDefault(require(\"../logger\"));\n\nconst constants_1 = require(\"../constants\");\n\nconst eventEmitter = window => {\n  return {\n    postMessage: (message, targetOrigin) => {\n      window.postMessage(message, targetOrigin);\n    }\n  };\n};\n\nexports.eventEmitter = eventEmitter; // TODO: Duplicate types in CivicSign\n// Move to a central repo or use TS paths\n\nvar CivicSignEventTypeResponse;\n\n(function (CivicSignEventTypeResponse) {\n  CivicSignEventTypeResponse[\"RESPONSE_PUBLIC_KEY\"] = \"RESPONSE_PUBLIC_KEY\";\n  CivicSignEventTypeResponse[\"RESPONSE_DID\"] = \"RESPONSE_DID\";\n  CivicSignEventTypeResponse[\"RESPONSE_SIGNED_PROOF\"] = \"RESPONSE_SIGNED_PROOF\";\n})(CivicSignEventTypeResponse = exports.CivicSignEventTypeResponse || (exports.CivicSignEventTypeResponse = {}));\n\nvar CivicSignEventTypeRequest;\n\n(function (CivicSignEventTypeRequest) {\n  CivicSignEventTypeRequest[\"REQUEST_PUBLIC_KEY\"] = \"REQUEST_PUBLIC_KEY\";\n  CivicSignEventTypeRequest[\"REQUEST_DID\"] = \"REQUEST_DID\";\n  CivicSignEventTypeRequest[\"REQUEST_SIGNED_PROOF\"] = \"REQUEST_SIGNED_PROOF\";\n})(CivicSignEventTypeRequest = exports.CivicSignEventTypeRequest || (exports.CivicSignEventTypeRequest = {}));\n\nclass RemoteSignWindowEventEmitter {\n  constructor(targetWindow) {\n    this.targetWindow = targetWindow;\n  }\n\n  sendPublicKey(publicKey) {\n    this.emit({\n      event: CivicSignEventTypeResponse.RESPONSE_PUBLIC_KEY,\n      data: publicKey\n    });\n  }\n\n  sendDid(did) {\n    this.emit({\n      event: CivicSignEventTypeResponse.RESPONSE_DID,\n      data: did\n    });\n  }\n\n  sendSignedProof(proof) {\n    this.emit({\n      event: CivicSignEventTypeResponse.RESPONSE_SIGNED_PROOF,\n      data: proof\n    });\n  }\n\n  emit(event) {\n    this.targetWindow.postMessage(event, '*');\n  }\n\n}\n\nexports.RemoteSignWindowEventEmitter = RemoteSignWindowEventEmitter;\n\nconst remoteSignWindowEventEmitterImplementation = () => {\n  var _a;\n\n  const iFrameWindow = (_a = document.getElementById(constants_1.IFRAME_ID)) === null || _a === void 0 ? void 0 : _a.contentWindow;\n\n  if (!iFrameWindow) {\n    logger_1.default.debug('no iFrame window present');\n    return null;\n  }\n\n  return new RemoteSignWindowEventEmitter((0, exports.eventEmitter)(iFrameWindow));\n};\n\nexports.remoteSignWindowEventEmitterImplementation = remoteSignWindowEventEmitterImplementation;","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","remoteSignWindowEventEmitterImplementation","RemoteSignWindowEventEmitter","CivicSignEventTypeRequest","CivicSignEventTypeResponse","eventEmitter","logger_1","require","constants_1","window","postMessage","message","targetOrigin","constructor","targetWindow","sendPublicKey","publicKey","emit","event","RESPONSE_PUBLIC_KEY","data","sendDid","did","RESPONSE_DID","sendSignedProof","proof","RESPONSE_SIGNED_PROOF","_a","iFrameWindow","document","getElementById","IFRAME_ID","contentWindow","default","debug"],"sources":["/Users/nikola/Sites/candy-machine/candy-machine-ui/node_modules/@civic/solana-gateway-react/dist/esm/utils/remoteSign.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.remoteSignWindowEventEmitterImplementation = exports.RemoteSignWindowEventEmitter = exports.CivicSignEventTypeRequest = exports.CivicSignEventTypeResponse = exports.eventEmitter = void 0;\nconst logger_1 = __importDefault(require(\"../logger\"));\nconst constants_1 = require(\"../constants\");\nconst eventEmitter = (window) => {\n    return {\n        postMessage: (message, targetOrigin) => {\n            window.postMessage(message, targetOrigin);\n        },\n    };\n};\nexports.eventEmitter = eventEmitter;\n// TODO: Duplicate types in CivicSign\n// Move to a central repo or use TS paths\nvar CivicSignEventTypeResponse;\n(function (CivicSignEventTypeResponse) {\n    CivicSignEventTypeResponse[\"RESPONSE_PUBLIC_KEY\"] = \"RESPONSE_PUBLIC_KEY\";\n    CivicSignEventTypeResponse[\"RESPONSE_DID\"] = \"RESPONSE_DID\";\n    CivicSignEventTypeResponse[\"RESPONSE_SIGNED_PROOF\"] = \"RESPONSE_SIGNED_PROOF\";\n})(CivicSignEventTypeResponse = exports.CivicSignEventTypeResponse || (exports.CivicSignEventTypeResponse = {}));\nvar CivicSignEventTypeRequest;\n(function (CivicSignEventTypeRequest) {\n    CivicSignEventTypeRequest[\"REQUEST_PUBLIC_KEY\"] = \"REQUEST_PUBLIC_KEY\";\n    CivicSignEventTypeRequest[\"REQUEST_DID\"] = \"REQUEST_DID\";\n    CivicSignEventTypeRequest[\"REQUEST_SIGNED_PROOF\"] = \"REQUEST_SIGNED_PROOF\";\n})(CivicSignEventTypeRequest = exports.CivicSignEventTypeRequest || (exports.CivicSignEventTypeRequest = {}));\nclass RemoteSignWindowEventEmitter {\n    constructor(targetWindow) {\n        this.targetWindow = targetWindow;\n    }\n    sendPublicKey(publicKey) {\n        this.emit({\n            event: CivicSignEventTypeResponse.RESPONSE_PUBLIC_KEY,\n            data: publicKey,\n        });\n    }\n    sendDid(did) {\n        this.emit({\n            event: CivicSignEventTypeResponse.RESPONSE_DID,\n            data: did,\n        });\n    }\n    sendSignedProof(proof) {\n        this.emit({\n            event: CivicSignEventTypeResponse.RESPONSE_SIGNED_PROOF,\n            data: proof,\n        });\n    }\n    emit(event) {\n        this.targetWindow.postMessage(event, '*');\n    }\n}\nexports.RemoteSignWindowEventEmitter = RemoteSignWindowEventEmitter;\nconst remoteSignWindowEventEmitterImplementation = () => {\n    var _a;\n    const iFrameWindow = (_a = document.getElementById(constants_1.IFRAME_ID)) === null || _a === void 0 ? void 0 : _a.contentWindow;\n    if (!iFrameWindow) {\n        logger_1.default.debug('no iFrame window present');\n        return null;\n    }\n    return new RemoteSignWindowEventEmitter((0, exports.eventEmitter)(iFrameWindow));\n};\nexports.remoteSignWindowEventEmitterImplementation = remoteSignWindowEventEmitterImplementation;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}